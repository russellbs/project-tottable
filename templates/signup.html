{% extends "main.html" %}
{% load static %}
{% load socialaccount %}

{% block title %}Sign Up{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'auth.css' %}">
{% endblock %}

{% block content %}
<div class="auth-container">
  <div class="auth-card">
    <h2 class="auth-title">Lighten your mental load</h2>
    <p class="auth-subtitle">Start planning meals in seconds — your future self will thank you.</p>

    <div class="price-options text-center mb-3">
      <p class="mb-2"><strong>Try Tottable free for 14 days</strong> — then:</p>

      <div class="simple-pricing-toggle">
        <input type="hidden" name="selected_plan" id="selected-plan" value="yearly">

        <label class="simple-box">
          <input type="radio" name="plan" value="monthly">
          <span class="toggle-label">$4.99 per month</span>
        </label>

        <label class="simple-box selected">
          <input type="radio" name="plan" value="yearly" checked>
          <span class="toggle-label">
            $49 per year <span class="savings">(save 18%)</span>
          </span>
        </label>
      </div>
    </div>

    <!-- Google Signup -->
    <a href="{% provider_login_url 'google' %}" class="oauth-button" style="text-decoration: none;">
      <div style="width: 100%; display: inline-flex; align-items: center; justify-content: center; background: white; color: #5f6368; border: 1px solid #dadce0; border-radius: 4px; font-family: Roboto, sans-serif; font-size: 14px; font-weight: 500; height: 40px; padding: 0 12px; box-shadow: 0px 1px 2px rgba(0,0,0,0.05); transition: background 0.3s ease;">
        <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google logo" style="width: 18px; height: 18px; margin-right: 8px;">
        Sign up with Google
      </div>
    </a>

    <!-- OR Divider -->
    <div class="text-center my-3" style="position: relative;">
      <span style="background-color: white; padding: 0 10px; position: relative; z-index: 1;">OR</span>
      <hr style="margin: -12px 0 0 0; border-top: 1px solid #ccc; position: absolute; top: 50%; width: 100%; z-index: 0;">
    </div>

    <form id="signup-form" method="post" action="{% url 'pre-signup' %}">
      {% csrf_token %}
      <input type="hidden" name="selected_plan" id="selected-plan" value="yearly">

      <div class="form-group">
        <label for="id_first_name">Name</label>
        <input type="text" name="first_name" id="id_first_name" class="form-control" placeholder="Your name" required>
      </div>

      <div class="form-group">
        <label for="id_email">Email address</label>
        <input type="email" name="email" id="id_email" class="form-control" placeholder="Your email" required>
      </div>

      <div class="form-group">
        <label for="id_password">Password</label>
        <input type="password" name="password" id="id_password" class="form-control" placeholder="Password" required>
      </div>

      <button type="submit" class="btn btn-primary btn-block">
        Start 14-Day Free Trial
      </button>

      <!-- ✨ Add this reassurance line here -->
        <p class="guarantee-text text-center mt-2">
            Cancel anytime before day 14 — pay nothing if you do.
        </p>

      <p class="terms-text">
        By signing up, you accept our <a href="{% url 'terms' %}">terms of service</a> and <a href="{% url 'privacy' %}">privacy policy</a>.
      </p>
    </form>
  </div>
</div>

<script>
  const STRIPE_PUBLIC_KEY = "{{ STRIPE_PUBLIC_KEY }}";
</script>
<script src="https://js.stripe.com/v3/"></script>
<script src="{% static 'signup.js' %}"></script>
<script src="{% static 'landing.js' %}"></script> 
{% endblock %}
